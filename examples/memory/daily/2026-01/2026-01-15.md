# 2026-01-15 (Thu)

## Search Layer Optimization

### Multi-source integration
- Added Exa as secondary search source alongside Brave
- Implemented deduplication by URL normalization
- Scoring: Brave results get base weight 1.0, Exa gets 0.8 (adjusted by relevance)
- Tested with 10 queries â€” dedup removed ~15% redundant results

### Decision: prefix naming for knowledge files
- Discussed with Boss: use `fw-`/`ref-`/`pat-`/`sys-` prefixes instead of subdirectories
- Rationale: <20 files, flat + prefix is easier to scan
- Revisit threshold: ~30 files

## Memory Review Cron Setup
- Created cron job: every 2 days at 22:00 CST
- Model: opus (needs reasoning depth for knowledge extraction)
- Delivery: none (agent sends via message tool directly)
- First run scheduled for tomorrow

## Bug Fix: Atomic Write
- token-tracker.js was writing directly to final path
- Race condition: backup script could read half-written JSON
- Fix: write to .tmp first, then fs.renameSync to final path
- Added same pattern to all cron output files
